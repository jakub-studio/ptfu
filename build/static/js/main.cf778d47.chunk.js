(this.webpackJsonpptfu=this.webpackJsonpptfu||[]).push([[0],{23:function(e,t,n){},24:function(e,t,n){},25:function(e,t,n){},26:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var i=n(0),c=n(1),a=n.n(c),r=n(12),s=n.n(r),l=(n(23),n(24),n(2)),u=n.n(l),o=(n(25),function(e){var t=e.secondary,n=e.horizontal;return Object(i.jsx)("div",{className:u()(t?"divider-secondary":"divider-primary",n?"divider-horizontal":"divider-vertical")})}),d=(n(26),function(e){var t=e.title,n=e.id,c=e.children;return Object(i.jsxs)("div",{className:"section",id:n,children:[Object(i.jsx)("h1",{className:"mb-8 lineheight80",children:t}),Object(i.jsx)(o,{horizontal:!0}),c]})}),b=n(9),j=n(5),h=0,v=function(){return"assignee-".concat(++h)},f=function(){var e=Math.round(Math.random()),t=function(e,t){var n=Math.random()*(t-e)+e;return Math.floor(n)}(0,359);return"hsl(".concat(t,", 100%, ").concat(e?85:75,"%)")},p=Object(b.a)((function(e,t){return{assignees:[],addIndividual:function(t){var n={name:t,colour:f(),type:"indivdual",id:v()};return e((function(e){return Object(j.a)(e,(function(e){e.assignees.push(n)}))})),n},addGroup:function(t,n){var i={name:t,colour:f(),type:"group",id:v(),members:n||[]};return e((function(e){return Object(j.a)(e,(function(e){e.assignees.push(i)}))})),i},getAssignee:function(e){return t().assignees.find((function(t){return t.id===e}))}}})),O=n(8),m=function(e){return e.calculated=function(e,t){var n,i=t.filter((function(e){return"indivdual"===e.type})),c=0,a=0,r=0,s={},l=Object(O.a)(i);try{for(l.s();!(n=l.n()).done;)s[n.value.id]={total:0,indivdual:0}}catch(g){l.e(g)}finally{l.f()}var u,o=Object(O.a)(e);try{for(o.s();!(u=o.n()).done;){var d=u.value;if(0===d.assignees.length)r=(a+=d.price)/i.length;else{var b,j=d.price/d.assignees.length,h=Object(O.a)(d.assignees);try{for(h.s();!(b=h.n()).done;){var v=b.value;s[v].indivdual=s[v].indivdual+j}}catch(g){h.e(g)}finally{h.f()}}c+=d.price}}catch(g){o.e(g)}finally{o.f()}var f,p=Object(O.a)(i);try{for(p.s();!(f=p.n()).done;){var m=s[f.value.id];m.total=m.total+m.indivdual+r}}catch(g){p.e(g)}finally{p.f()}return{total:c,allMembers:{total:a,indivdual:r},indivduals:s}}(e.entries,p.getState().assignees),e},g=Object(b.a)((function(e,t){return{name:"Untitled Shop",entries:[],calculated:{total:0,allMembers:{total:0,indivdual:0},indivduals:{}},addEntry:function(t){return e((function(e){return Object(j.a)(e,(function(e){e.entries.push(t),m(e)}))}))},removeEntry:function(t){return e((function(e){return Object(j.a)(e,(function(e){t>-1&&e.entries.splice(t,1),m(e)}))}))},clear:function(){return e((function(e){return Object(j.a)(e,(function(e){e.entries=[],m(e)}))}))}}})),x=function(e){return"\xa3"+e.toLocaleString("en",{minimumFractionDigits:2})},k=function(e){return"  -  "+e},y=n(13),C=n(14),N=n(4),I=n(17),S=n(15),E=n(3),A=(n(28),function(e){var t=e.onClickOut,n=e.placeholder,a=e.onSubmit,r=Object(c.useRef)(null),s=Object(c.useState)(""),l=Object(E.a)(s,2),u=l[0],o=l[1],d=function(e){console.log(e),r.current&&!r.current.contains(e.target)&&(console.log("click out event"),t())};Object(c.useEffect)((function(){return document.addEventListener("click",d),function(){document.removeEventListener("click",d)}}),[]);var b=Object(c.useCallback)((function(){""!==u.trim()&&(a(u.trim()),t())}),[u,a,t]),j=Object(c.useCallback)((function(e){var t=e.nativeEvent.data;if(console.log(t),"Enter"===t)return console.warn("enter key hit"),e.preventDefault(),b();o(e.target.value)}),[o,b]);return Object(i.jsxs)("div",{className:"assignee-input-container",onClick:function(e){e.stopPropagation(),e.preventDefault()},children:[Object(i.jsx)("input",{size:10,autoFocus:!0,value:u,onChange:j,onClick:function(e){e.stopPropagation(),e.preventDefault()},placeholder:n,className:"use-blue-focus",ref:r}),Object(i.jsx)("div",{onClick:b,className:"submit-button",children:"+"})]})}),M=function(e){Object(I.a)(n,e);var t=Object(S.a)(n);function n(e){var i;return Object(y.a)(this,n),(i=t.call(this,e)).state={displayInput:!1},i.onOuterClick=i.onOuterClick.bind(Object(N.a)(i)),i.renderCheckbox=i.renderCheckbox.bind(Object(N.a)(i)),i.getStyle=i.getStyle.bind(Object(N.a)(i)),i.canBecomeInput=i.canBecomeInput.bind(Object(N.a)(i)),i.renderChildren=i.renderChildren.bind(Object(N.a)(i)),i.onInputSubmit=i.onInputSubmit.bind(Object(N.a)(i)),i.onInputHide=i.onInputHide.bind(Object(N.a)(i)),i.isClickable=i.isClickable.bind(Object(N.a)(i)),i}return Object(C.a)(n,[{key:"canBecomeInput",value:function(){return"object"===typeof this.props.input}},{key:"isClickable",value:function(){return Boolean(this.props.onClick||this.canBecomeInput())}},{key:"onOuterClick",value:function(e){var t=this.props.onClick;if(e.preventDefault(),"function"===typeof t)return t();this.canBecomeInput()&&!1===this.state.displayInput&&this.setState({displayInput:!0})}},{key:"onInputSubmit",value:function(e){var t;null===(t=this.props.input)||void 0===t||t.onInput(e)}},{key:"onInputHide",value:function(){this.setState({displayInput:!1})}},{key:"getStyle",value:function(){var e=this.props,t=e.colour,n={backgroundColor:t||"hsl(0, 0%, 90%)"};return e.dashed&&(n.backgroundColor=void 0),n}},{key:"renderCheckbox",value:function(){return"boolean"===typeof this.props.checkbox&&Object(i.jsx)("div",{className:u()("checkbox","checkbox-".concat(this.props.checkbox))})}},{key:"renderChildren",value:function(){var e;return this.state.displayInput?Object(i.jsx)(A,{onSubmit:this.onInputSubmit,onClickOut:this.onInputHide,placeholder:null===(e=this.props.input)||void 0===e?void 0:e.placeholder}):this.props.children}},{key:"render",value:function(){var e=this.props.dashed,t=this.isClickable();return Object(i.jsxs)("button",{className:u()("assignee use-blue-focus",e&&"dashed",t&&"clickable"),onClick:this.onOuterClick,style:this.getStyle(),tabIndex:t?0:-1,children:[this.renderCheckbox(),this.renderChildren()]})}}]),n}(a.a.Component),w=function(e){var t=e.children;return Object(i.jsx)("div",{className:"assignee-list",children:t})},z=M,B=(n(29),function(e){var t=e.onClick,n=e.submit,c=e.primary,a=e.children,r=e.className,s=e.width100;return Object(i.jsx)("input",{onClick:t,type:n?"submit":"button",value:a,className:u()("button use-blue-focus",{"button-primary":c,"width-100":s},r)})}),D=function(e){var t=e.value,n=e.symbol;return Object(i.jsxs)(i.Fragment,{children:[n||"\xa3",t.toLocaleString("en",{minimumFractionDigits:2})]})},F=function(){var e=g(),t=e.calculated,n=p(),a=n.getAssignee,r=n.assignees,s=Object(c.useCallback)((function(){navigator.clipboard.writeText(function(e,t){return["Receipt Breakdown - ".concat(e.name),"","Total Receipt Charge: ".concat(x(e.calculated.total)),"","All Members:",k("Total Charge: ".concat(x(e.calculated.allMembers.total))),k("Individual Charge: ".concat(x(e.calculated.allMembers.indivdual))),"",Object.keys(e.calculated.indivduals).map((function(n){var i=t.find((function(e){return e.id===n}));return i?["".concat(i.name,":"),"Total Charge: ".concat(x(e.calculated.indivduals[i.id].total)),0===e.calculated.indivduals[i.id].indivdual?"":"(Individual Charge: ".concat(x(e.calculated.indivduals[i.id].indivdual),")")].join(" ").trim():""})),"","Receipt Items:",e.entries.map((function(e){return"".concat(e.description," - ").concat(x(e.price)," (").concat(0===e.assignees.length?"All":e.assignees.map((function(e){var n=t.find((function(t){return t.id===e}));return e?null===n||void 0===n?void 0:n.name:null})).filter(Boolean).join(", "),")")}))].flat().join("\n")}(e,r))}),[e,r]);return Object(i.jsxs)(d,{title:"breakdown",id:"section-manage",children:[Object(i.jsxs)("div",{className:"receipt-item lineheight80",children:[Object(i.jsx)("b",{children:"total"}),Object(i.jsx)("b",{children:Object(i.jsx)(D,{value:t.total})})]}),Object(i.jsx)(o,{horizontal:!0,secondary:!0}),Object(i.jsxs)(w,{children:[Object(i.jsx)(z,{children:"All Members"}),Object(i.jsxs)("h2",{children:["Total: ",Object(i.jsx)(D,{value:t.allMembers.total})]}),Object(i.jsxs)("h2",{children:["Indivdual: ",Object(i.jsx)(D,{value:t.allMembers.indivdual})]})]}),Object(i.jsx)("div",{className:"mb-8"}),Object.keys(t.indivduals).map((function(e,n,c){var r=a(e);return r?Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)(w,{children:[Object(i.jsx)(z,{colour:r.colour,children:r.name}),Object(i.jsxs)("h2",{children:["Total: ",Object(i.jsx)(D,{value:t.indivduals[e].total})]}),Object(i.jsxs)("h2",{children:["Indivdual: ",Object(i.jsx)(D,{value:t.indivduals[e].indivdual})]})]},r.id),c.length!==n+1&&Object(i.jsx)("div",{className:"mb-8"})]}):null})),Object(i.jsx)(o,{horizontal:!0}),Object(i.jsx)("div",{children:Object(i.jsx)(B,{onClick:s,children:"copy"})})]})},T=(n(30),function(e){var t=e.entry,n=e.index,a=g().removeEntry,r=p().getAssignee,s=Object(c.useCallback)((function(){a(n)}),[n,a]);return Object(i.jsx)("div",{className:"receipt-entry-container",children:Object(i.jsxs)("div",{className:"receipt-item lineheight80 receipt-entry",children:[Object(i.jsxs)(w,{children:[Object(i.jsx)("span",{children:t.description}),0===t.assignees.length&&Object(i.jsx)(z,{children:"All Members"}),t.assignees.map((function(e){var t=r(e);return t?Object(i.jsx)(z,{colour:t.colour,children:t.name},t.id):null}))]}),Object(i.jsxs)("span",{children:[Object(i.jsx)(D,{value:t.price}),Object(i.jsx)("button",{className:"receipt-delete-entry-button",onClick:s,children:"x"})]})]})})}),L=function(){var e=g().entries;return Object(i.jsx)(d,{title:"receipt",id:"section-receipt",children:Object(i.jsx)("div",{className:"receipt-container",children:Object(i.jsx)("div",{className:"receipt-entries",children:e.map((function(e,t){return Object(i.jsx)(T,{entry:e,index:t},t)}))})})})},R=(n(31),function(e){var t=e.value,n=e.onChange,c=e.placeholder,r=e.number,s=e.autofocus,l=e.id,o=e.size,d=e.error,b=a.a.useCallback((function(e){var t=e.target.value,i=e.nativeEvent.data;if(!r)return n(t);var c=t.split("."),a=c.length-1;if(null===i)return n(t);if("."===i){if(a>=2)return;return n(t)}isNaN(parseInt(i,10))||1===a&&c[1].length>=3||n(t)}),[n,r]);return Object(i.jsxs)("div",{className:"input-field-container",children:[Object(i.jsx)("input",{autoFocus:s,className:u()("input-field use-blue-focus",d&&"error"),value:t,onChange:b,placeholder:c,id:l,autoComplete:"off",size:o}),"string"===typeof d&&Object(i.jsxs)("div",{className:"error-box",children:[Object(i.jsx)("span",{children:"error:"}),d]})]})}),H=n(16),J=function(e,t,n){return function(){return t(e.filter((function(e){return e!==n})))}},P=function(e){var t=p(),n=t.assignees,c=t.addIndividual,a=t.getAssignee,r=0===e.assignees.length;return console.log(e.assignees),Object(i.jsxs)("div",{className:"mb-8",children:[Object(i.jsxs)(w,{children:[Object(i.jsx)("h2",{children:"Assigned to:"}),r&&Object(i.jsx)(z,{children:"All Members"}),e.assignees.map((function(t){var n=a(t);return n?Object(i.jsx)(z,{colour:n.colour,onClick:J(e.assignees,e.setAssignees,n.id),children:n.name},t):null}))]}),Object(i.jsx)(o,{horizontal:!0,secondary:!0}),Object(i.jsxs)(w,{children:[n.map((function(t){var n,c,a,r=e.assignees.includes(t.id);return Object(i.jsx)(z,{checkbox:r,colour:t.colour,onClick:r?J(e.assignees,e.setAssignees,t.id):(n=e.assignees,c=e.setAssignees,a=t.id,function(){return c(Array.from(new Set([].concat(Object(H.a)(n),[a]))))}),children:t.name},t.id)})),Object(i.jsx)(z,{dashed:!0,input:{placeholder:"name",onInput:c},children:"+"})]})]})},G=(n(32),"submit-item-desc-input"),U="submit-item-price-input",V=function(){var e;return null===(e=document.getElementById(G))||void 0===e?void 0:e.focus()},q=function(){var e=Object(c.useState)(""),t=Object(E.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)(""),l=Object(E.a)(s,2),u=l[0],o=l[1],b=Object(c.useState)(void 0),j=Object(E.a)(b,2),h=j[0],v=j[1],f=Object(c.useState)(void 0),p=Object(E.a)(f,2),O=p[0],m=p[1],x=Object(c.useState)([]),k=Object(E.a)(x,2),y=k[0],C=k[1],N=g((function(e){return e.addEntry})),I=a.a.useCallback((function(e){return e.preventDefault(),""===n.trim()?(v("description missing"),void V()):""===u.trim()?(m("price missing"),void function(){var e;null===(e=document.getElementById(U))||void 0===e||e.focus()}()):(N({description:n.trim(),price:parseFloat(u.trim()),assignees:y}),r(""),o(""),void V())}),[n,u,N,y]),S=Object(c.useCallback)((function(e){h&&v(void 0),r(e)}),[h,v,r]),A=Object(c.useCallback)((function(e){O&&m(void 0),o(e)}),[O,m,o]);return Object(i.jsx)(d,{title:"submit",id:"section-submit",children:Object(i.jsxs)("form",{onSubmit:I,children:[Object(i.jsxs)("div",{className:"input-array mb-8",children:[Object(i.jsx)(R,{autofocus:!0,placeholder:"item description",value:n,onChange:S,id:G,error:h}),Object(i.jsx)(R,{placeholder:"\xa3 item price",value:u,onChange:A,number:!0,id:U,error:O,size:30})]}),Object(i.jsx)(P,{assignees:y,setAssignees:C}),Object(i.jsx)(B,{primary:!0,submit:!0,width100:!0,className:"mb-8",children:"+ add to receipt"})]})})},K=(n(33),function(){var e=g((function(e){return e.clear}));return Object(i.jsx)(d,{title:"manage",id:"section-manage",children:Object(i.jsxs)("div",{className:"button-array",children:[Object(i.jsx)(B,{onClick:e,children:"clear receipt"}),Object(i.jsx)(B,{onClick:function(){return p.setState({assignees:[]})},children:"clear indivduals"})]})})}),Q=(n(34),function(e){var t=Object(c.useState)(!1),n=Object(E.a)(t,2),a=n[0],r=n[1],s=Object(c.useRef)(null),l=Object(c.useCallback)((function(){r(!0)}),[]),o=Object(c.useCallback)((function(){r(!1)}),[]),d=Object(c.useCallback)((function(t){t.preventDefault();var n=new FormData(t.currentTarget);e.onChange(n.get("value").trim()),r(!1)}),[e]),b=function(e){s.current&&!s.current.contains(e.target)&&o()};return Object(c.useEffect)((function(){return document.addEventListener("click",b),function(){document.removeEventListener("click",b)}}),[]),Object(i.jsx)("button",{className:u()("editable use-blue-focus",e.large&&"large",a?"editing":"idle"),onClick:l,ref:s,children:a?Object(i.jsx)("form",{onSubmit:d,children:Object(i.jsx)("input",{name:"value",defaultValue:e.value,autoFocus:!0,className:u()("use-blue-focus",e.large&&"large"),size:15})}):e.value})}),W=function(){var e=g((function(e){return e.name})),t=Object(c.useCallback)((function(e){g.setState({name:e})}),[]);return Object(i.jsxs)("div",{className:"app",children:[Object(i.jsxs)("div",{className:"app-header",children:[Object(i.jsx)("div",{className:"app-logo",children:Object(i.jsx)("h1",{children:"\ud83d\udcb5 pay the f*** up"})}),Object(i.jsx)(Q,{large:!0,value:e,onChange:t})]}),Object(i.jsxs)("div",{className:"app-sections",children:[Object(i.jsx)(F,{}),Object(i.jsx)(o,{}),Object(i.jsx)(L,{}),Object(i.jsx)(o,{}),Object(i.jsxs)("div",{className:"section",children:[Object(i.jsx)(q,{}),Object(i.jsx)(K,{})]})]})]})};s.a.render(Object(i.jsx)(a.a.StrictMode,{children:Object(i.jsx)(W,{})}),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.cf778d47.chunk.js.map